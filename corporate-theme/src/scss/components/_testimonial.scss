// ============================================
// Testimonial Component
// ============================================
@use "../variables" as *;
@use "../mixins" as *;
@use "../typography" as *;

.testimonial {
  @include section-padding;
  @include section-margin-bottom;
  @include glassmorphic($bg-opacity: 0.05, $blur: 10px, $bg-color: $primary);
  position: relative;
  overflow: hidden; // Để các khối bob không tràn ra ngoài

  // Đảm bảo content nằm trên background
  .container {
    position: relative;
    z-index: 2; // Cao hơn background (z-index: 0-1)
  }

  // ============================================
  // Testimonial Header
  // ============================================
  &__header {
    text-align: center;
    margin-bottom: 3rem;
    position: relative;
    z-index: 1;

    @media (max-width: 768px) {
      margin-bottom: 2rem;
    }
  }

  // ============================================
  // Testimonial Carousel
  // ============================================
  &__carousel-wrapper {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0;
    z-index: 1; // Đảm bảo carousel nằm trên background

    @media (max-width: 768px) {
      padding: 0;
    }
  }

  &__carousel {
    overflow: hidden;
    padding: 20px 0;

    .swiper-wrapper {
      align-items: stretch;
    }

    .swiper-slide {
      padding-top: 30px;
      padding-bottom: 10px;
      height: auto;
      display: flex;
      @media (max-width: 768px) {
        padding-top: 50px;
        padding-bottom: 10px;
      }
      @media (max-width: 576px) {
        padding-top: 50px;
        padding-bottom: 5px;
      }
    }
  }

  // Navigation Buttons - Glassmorphic
  &__carousel-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: none;
    @include glassmorphic;
    @include gradient-text;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);

    &:hover {
      background-color: rgba($white, 0.6);
      transform: translateY(-50%) scale(1.1);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }

    &:active {
      transform: translateY(-50%) scale(0.95);
    }

    &:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      pointer-events: none;
    }

    &--prev {
      left: -25px;

      @media (max-width: 768px) {
        left: -20px;
        width: 45px;
        height: 45px;
        font-size: 1rem;
      }
    }

    &--next {
      right: -25px;

      @media (max-width: 768px) {
        right: -20px;
        width: 45px;
        height: 45px;
        font-size: 1rem;
      }
    }
  }

  // ============================================
  // Testimonial Card Container
  // ============================================
  &__card-container {
    position: relative;
    width: 100%;
    height: 100%;
  }

  // ============================================
  // Card 1: Avatar (Hình tròn) - Layer lên top left
  // ============================================
  &__avatar-card {
    position: absolute;
    top: -25px; // 1/2 chiều cao để layer lên card
    left: 10px;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    overflow: hidden;
    box-shadow: $shadow-lg;
    border: 4px solid $white;
    z-index: 10;

    @media (max-width: 768px) {
      width: 120px;
      height: 120px;
      top: -60px;
      left: 20px;
    }

    @media (max-width: 576px) {
      width: 100px;
      height: 100px;
      top: -50px;
      left: 15px;
    }

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }

  // ============================================
  // Card 2: Content Card (Hình chữ nhật)
  // ============================================
  &__content-card {
    background-color: $white;
    border-radius: $border-radius-lg;
    padding: 2rem;
    padding-top: 1.5rem; // Giảm padding-top để tên và sao nằm ở dòng đầu
    margin-left: 30px;
    box-shadow: $shadow-md;
    position: relative;
    min-height: 200px;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    width: 90%;

    @media (max-width: 768px) {
      padding: 1.5rem;
      padding-top: 1rem;
      min-height: auto;
    }

    @media (max-width: 576px) {
      padding-top: 0.75rem;
    }

    // Dòng 1: Header với thông tin (nằm ở dòng đầu của card)
    &-header {
      display: flex;
      align-items: flex-start;
      gap: 1.5rem;
      position: relative;
      margin-left: 140px; // Tránh bị che bởi avatar (120px + 20px gap)
      margin-top: 0;
      margin-bottom: 0;

      @media (max-width: 768px) {
        margin-left: 140px; // 120px avatar + 20px gap
      }

      @media (max-width: 576px) {
        margin-left: 120px; // 100px avatar + 20px gap
        gap: 1rem;
      }
    }

    // Thông tin (tên và rating)
    &-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    // Tên khách hàng
    &-name {
      font-size: 1.25rem;
      font-weight: 600;
      color: $text-dark;
      margin: 0;

      @media (max-width: 576px) {
        font-size: 1.1rem;
      }
    }

    // 5 sao
    &-rating {
      display: flex;
      gap: 0.25rem;
      color: #FFD700; // Gold color for stars

      i {
        font-size: 1rem;
      }
    }

    // Dòng 2: Bình luận
    &-comment {
      font-size: 1rem;
      line-height: 1.6;
      color: $text-light;
      margin: 0;
      font-style: italic;

      @media (max-width: 576px) {
        font-size: 0.9rem;
      }
    }
  }
}

